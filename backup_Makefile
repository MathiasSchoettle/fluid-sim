# Compiler
NVCC = nvcc

# Compiler flags
NVCCFLAGS = -arch=sm_89

# Libraries
LDLIBS = -lbigduckgl -limgui -lGLEW -lglfw -lGL -lassimp

# Source files
CPP_SOURCES = src/main.cpp src/simulation.cpp src/quad.cpp
CUDA_SOURCES = src/hw.cu

# Object files
CPP_OBJECTS = $(CPP_SOURCES:.cpp=.o)
CUDA_OBJECTS = $(CUDA_SOURCES:.cu=.o)

# Targets
all: myprogram

myprogram: $(CPP_OBJECTS) $(CUDA_OBJECTS)
	$(NVCC) $(NVCCFLAGS) $(LDFLAGS) -o $@ $^ $(LDLIBS)

# Compile C++ files
%.o: %.cpp
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $< -o $@

# Compile CUDA files
%.o: %.cu
	$(NVCC) $(NVCCFLAGS) $(CPPFLAGS) -c $< -o $@

clean:
	rm -f $(CPP_OBJECTS) $(CUDA_OBJECTS) myprogram
